---
layout: post
title: "Mẹo với find và sed"
published: true
tags: [find, sed]
---

## Tìm và xóa tệp

Tìm và xóa các tệp `Thumbs.db`

    find /flashdrive -type f -name "Thumbs.db" -exec rm -f {} \;

- `-type f`           : chỉ tìm tệp không tìm thư mục
- `-name "tên-file"`  : tên tệp
- `-exec rm -f {} \;` : xóa tất cả các tệp tìm thấy

## Tìm và thay thế chuỗi trong nhiều tệp

Thay đổi categories của các post từ `[blog]` sang `[site]`

    find _post -name "*.md" -print | xargs sed -i 's|categories\:\ \[blog\]|categories\:\ \[site\]|g'

## Xóa dòng bắt đầu từ xác định trong nhiều tệp

Tìm các dòng bắt đầu với `categories` và xóa

    find _post -name "*.md" -print | xargs sed -i '|^categories|d'

### Mẹo: xóa các dòng comment

Xóa các dòng comment bắt đầu với `#` hoặc `@`

    sed -i '|^[#@]|d' vi-du.txt

### Chèn dòng sau một chuỗi trong tệp

Để chèn dòng `categories: [blog]` sau dòng bắt đầu với `tags:` trong tệp bài
viết của blog jekyll:

    sed -i '/tags/a \
    categories: [blog]' \
    bai-viet.md
